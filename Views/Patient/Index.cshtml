@{
    ViewData["Title"] = "Patient List (via API)";
}

<h2>Patient List</h2>

<table class="table table-bordered" id="patientsTable">
    <thead>
        <tr>
            <th>Name</th>
            <th>Age</th>
            <th>Room</th>
        </tr>
    </thead>
    <tbody>
        
    </tbody>
</table>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        fetch('/api/patient')
            .then(response => {
                if (!response.ok) throw new Error("API error");
                return response.json();
            })
            .then(patients => {
                const tableBody = document.querySelector('#patientsTable tbody');
                tableBody.innerHTML = ''; // clear any existing rows

                patients.forEach(p => {
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td>${p.name}</td>
                        <td>${p.age}</td>
                        <td>${p.roomNumber}</td>
                    `;
                    tableBody.appendChild(row);
                });
            })
            .catch(error => {
                console.error('Error loading patients:', error);
                alert('Failed to load patients.');
            });
    });
</script>
